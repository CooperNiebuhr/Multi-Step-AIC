---
title: "Branching Behavior in Multi-Path Forward Selection"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Branching Behavior in Multi-Path Forward Selection}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)

library(finalprojectgroup2)
```

## Overview

This vignette illustrates the branching behavior of the multi-path forward
selection algorithm implemented in `build_paths()`. We construct a synthetic
dataset with highly correlated predictors so that multiple models have very
similar AIC values, which encourages branching. We then visualize the number of
models in the frontier at each step using `plot_branching_by_step()`.

## Simulated data with correlated predictors

```{r simulate-data}
set.seed(123)

n <- 150
x1 <- rnorm(n)
x2 <- x1 + rnorm(n, sd = 0.05)
x3 <- rnorm(n)
x4 <- rnorm(n)
x5 <- rnorm(n)

y  <- 1 + 1.5 * x1 + 1.5 * x2 + rnorm(n, sd = 1)

X <- cbind(x1, x2, x3, x4, x5)
colnames(X) <- paste0("x", 1:5)
```

## Build the path forest

```{r build-paths}
forest_sim <- build_paths(
  X      = X,
  y      = y,
  family = "gaussian",
  K      = 5,
  eps    = 1e-6,
  delta  = 4,
  L      = 50
)

sapply(forest_sim$frontiers, nrow)
```

## Visualize branching

```{r plot-branching}
plot_branching_by_step(forest_sim)
```
